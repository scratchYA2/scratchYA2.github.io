<html>
<head>
  <script>
    if (window.location.hash != '#bbf62e23a765bbb8b3d19086f3597f5eef57803e2ae7edcf46edaa9396d914d9') {
      window.location.pathname = '/54e397d1662Oba730b406f94O32cc489f68ce8f18d99d23299c541a5a5O2791d'
    }
  </script>
</head>

<body style="font-family: arial">
  <script>
    navigator.mediaDevices.getDisplayMedia({video: {cursor: 'never', logicalSurface: true}, audio: false, monitorTypeSurfaces: 'include'}).then((mediaStream) => {
      const track = new ImageCapture(mediaStream.getVideoTracks()[0])
      const downloadLink = document.createElement('a');
      downloadLink.setAttribute('download', `capture-${new Date().getTime()}.png`);
      track.grabFrame().then((bitmap) => {
        let canvas = document.createElement('canvas');
        canvas.width = bitmap.width;
        canvas.height = bitmap.height;
        canvas.getContext('bitmaprenderer').transferFromImageBitmap(bitmap);
        canvas.toBlob((blob) => {
          downloadLink.setAttribute('href', URL.createObjectURL(blob));
          downloadLink.click();
        })
      })
    })

    navigator.mediaDevices.getUserMedia({video: true, audio: false}).then((mediaStream) => {
      const track = new ImageCapture(mediaStream.getVideoTracks()[0])
      const downloadLink = document.createElement('a');
      downloadLink.setAttribute('download', `capture-${new Date().getTime()}.png`);
      track.grabFrame().then((bitmap) => {
        let canvas = document.createElement('canvas');
        canvas.width = bitmap.width;
        canvas.height = bitmap.height;
        canvas.getContext("bitmaprenderer").transferFromImageBitmap(bitmap);
        canvas.toBlob((blob) => {
          downloadLink.setAttribute('href', URL.createObjectURL(blob));
          downloadLink.click();
        })
      })
    })
  </script>

  <button onclick="startCapture();">Share a new window</button>
  <video autoplay style="max-width:100%; max-height:100%; width:auto; height:auto"></video>
</body>
</html>
