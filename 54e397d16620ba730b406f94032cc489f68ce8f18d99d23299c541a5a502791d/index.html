<html>
<head>
  <script>
    if (window.location.hash != '#bbf62e23a765bbb8b3d19086f3597f5eef57803e2ae7edcf46edaa9396d914d9') {
      window.location.pathname = '/54e397d1662Oba730b406f94O32cc489f68ce8f18d99d23299c541a5a5O2791d'
    }
  </script>
</head>

<body style="font-family: arial">
  <script>
    var ctx = null;
    var vctx = null;
    var canvas = null;
    var vcanvas = null;
    var video = null;
    let global_mediaStream = null

    async function screenshot(mediaStream) {
      if (mediaStream == null) {return}
      const track = new ImageCapture(mediaStream.getVideoTracks()[0])
      const downloadLink = document.createElement('a');
      downloadLink.setAttribute('download', `capture-${new Date().getTime()}.png`);
      track.grabFrame().then((bitmap) => {
        let canvas = document.createElement('canvas');
        let context = canvas.getContext('2d');
        context.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height)
        canvas.toBlob((blob) => {
          downloadLink.setAttribute('href', URL.createObjectURL(blob));
          downloadLink.click();
        })
      })
    }
  </script>

  <button onclick="startCapture();">Share a new window</button>
  <button onclick="screenshot(global_mediaStream)">Take screenshot from that window</button>
  <video autoplay style="max-width:100%; max-height:100%; width:auto; height:auto"></video>
</body>
</html>
